<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SmartQala ‚Äî –¶–∏—Ñ—Ä–æ–≤–æ–π –≥–æ—Ä–æ–¥</title>
 
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
 
<style>
:root{
    --bg:#f4f9ff;
    --accent:#4DA6FF;
    --accent-dark:#1E88E5;
    --danger:#E74C3C;
    --text:#0F2A43;
}
 
*{box-sizing:border-box;font-family:Inter,sans-serif;}
body{margin:0;background:var(--bg);color:var(--text);}
 
header{
    background:white;
    padding:20px 60px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 4px 12px rgba(0,0,0,0.05);
    position:sticky;
    top:0;
    z-index:100;
}
 
.logo{
    font-weight:800;
    font-size:22px;
    color:var(--accent-dark);
}
 
nav{
    display:flex;
    gap:25px;
}
 
nav button{
    background:none;
    border:none;
    font-size:15px;
    font-weight:500;
    cursor:pointer;
}
 
nav button.active{
    color:var(--accent-dark);
    font-weight:700;
}
 

.hero{
    padding:100px 60px;
    background:linear-gradient(120deg,#4DA6FF,#1E88E5);
    color:white;
}
 
.hero h1{font-size:44px;margin:0 0 20px 0;}
.hero p{max-width:650px;font-size:18px;opacity:0.95;}
 
.section{display:none;padding:60px;min-height:80vh;}
.section.active{display:block;}
 
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
    gap:30px;
}
 
.card{
    background:white;
    padding:30px;
    border-radius:18px;
    box-shadow:0 8px 24px rgba(0,0,0,0.06);
    margin-bottom:20px;
}
 
.list-item{
    display:flex;
    justify-content:space-between;
    padding:12px 0;
    border-bottom:1px solid #eee;
}
 
.notification{
    padding:15px;
    background:#fff;
    border-left:5px solid #E1BD72;
    border-radius:12px;
    margin-bottom:15px;
}
 
.emergency-box{
    padding:25px;
    border-radius:18px;
    background:#fff4f4;
    border-left:6px solid var(--danger);
}
 
button.primary{
    background:var(--accent-dark);
    color:white;
    padding:12px 20px;
    border:none;
    border-radius:12px;
    margin-top:15px;
    cursor:pointer;
}
 
footer{
    background:white;
    padding:30px 60px;
    text-align:center;
    font-size:14px;
    color:#666;
}
 
@media(max-width:768px){
    header{padding:20px;}
    .hero{padding:60px 20px;}
    .section{padding:40px 20px;}
    .hero h1{font-size:28px;}
}
</style>
</head>
<body>
 
<header>
<div class="logo">SmartQala</div>
<nav>
<button onclick="showTab(event,'home')" class="active">–ì–ª–∞–≤–Ω–∞—è</button>
<button onclick="showTab(event,'profile')">–ü—Ä–æ—Ñ–∏–ª—å</button>
<button onclick="showTab(event,'complaints')">–û–±—Ä–∞—â–µ–Ω–∏—è</button>
<button onclick="showTab(event,'notifications')">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
<button onclick="showTab(event,'emergency')">Emergency</button>
<button onclick="showTab(event,'voting')">–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</button>
</nav>
</header>
 

<section id="home" class="section active">
<div class="hero">
<h1>–¶–∏—Ñ—Ä–æ–≤–æ–π –≥–æ—Ä–æ–¥ –±—É–¥—É—â–µ–≥–æ</h1>
<p>
            SmartQala ‚Äî –µ–¥–∏–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –≥—Ä–∞–∂–¥–∞–Ω, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—Ä–µ–¥—ã
            –∏ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è.
</p>
</div>
 
    <div class="grid" style="margin-top:40px;">
<div class="card">
<h3>üì© 24/7 –û–±—Ä–∞—â–µ–Ω–∏—è</h3>
<p>–°–æ–æ–±—â–∞–π—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –≥–æ—Ä–æ–¥–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.</p>
</div>
<div class="card">
<h3>üìä –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å</h3>
<p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ç—É—Å –≤–∞—à–∏—Ö –∑–∞—è–≤–æ–∫ –∏ —ç—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏.</p>
</div>
<div class="card">
<h3>üö® –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h3>
<p>–ü–æ–ª—É—á–∞–π—Ç–µ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</p>
</div>
</div>
</section>
 

<section id="profile" class="section">
<div class="card">
<h2>–õ–∏—á–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
<p><strong>–§–ò–û:</strong> –ê–∏–¥–∞ –û—Ä–∞–ª–±–µ–∫–æ–≤–∞</p>
<p><strong>–ò–ò–ù:</strong> 990101123456</p>
<p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 707 123 45 67</p>
<p><strong>eGov:</strong> –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</p>
</div>
</section>
 

<section id="complaints" class="section">
 
    <div class="card">
<h2>–ü–æ–¥–∞—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ</h2>
 
        <form id="complaintForm">
 
            <label><strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</strong></label><br><br>
<select id="category" required style="width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;">
<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É</option>
<option>–Ø–º—ã –Ω–∞ –¥–æ—Ä–æ–≥–µ</option>
<option>–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Å–≤–µ—â–µ–Ω–∏–µ</option>
<option>–ú—É—Å–æ—Ä –≤–æ –¥–≤–æ—Ä–µ</option>
<option>–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º</option>
<option>–ù–µ—Ç –æ—Ç–æ–ø–ª–µ–Ω–∏—è</option>
<option>–ü—Ä–æ–±–ª–µ–º—ã —Å –≤–æ–¥–æ–π</option>
<option>–ó–∞—Ç–æ—Ä—ã –∏ –ø—Ä–æ–±–∫–∏</option>
<option>–ü–ª–æ—Ö–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–æ—Ç—É–∞—Ä–æ–≤</option>
<option>–ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–≤–µ—Ç–æ—Ñ–æ—Ä—ã</option>
<option>–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∞ –¥–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞</option>
<option>–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–∫–æ–≤–∫–æ–π</option>
<option>–®—É–º –∏ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ</option>
<option>–ù–µ—É–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –ª—é–¥–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏</option>
<option>–û–±—Ä—É—à–µ–Ω–∏—è –∑–¥–∞–Ω–∏–π</option>
<option>–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</option>
<option>–ó–∞–±—Ä–æ—à–µ–Ω–Ω—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏</option>
<option>–î—Ä—É–≥–æ–µ</option>
</select>
 
            <br><br>
 
            <!-- –ü–æ–ª–µ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ —Å–≤–æ–µ–π –ø—Ä–æ–±–ª–µ–º—ã -->
<div id="manualProblemDiv" style="display:none; margin-bottom:15px;">
<label><strong>–£–∫–∞–∂–∏—Ç–µ —Å–≤–æ—é –ø—Ä–æ–±–ª–µ–º—É:</strong></label><br>
<input type="text" id="manualProblem" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É" 
                       style="width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;">
</div>
 
            <div id="selectedProblem" style="margin-bottom:15px;font-weight:600;"></div>
 
            <label><strong>–ê–¥—Ä–µ—Å (—É–ª–∏—Ü–∞, –¥–æ–º):</strong></label><br><br>
<input type="text" id="address" required
                   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —É–ª. –ê–±–∞—è, 25"
                   style="width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;">
 
            <br><br>
 
            <label><strong>–û—Ç–º–µ—Ç—å—Ç–µ —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ:</strong></label>
<div id="map" style="height:300px;border-radius:15px;margin-top:15px;"></div>
 
            <br>
 
            <label><strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong></label>
<textarea id="description" rows="4" required
                      style="width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;"
                      placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É"></textarea>
 
            <br><br>
<button type="submit" class="primary">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</form>
</div>
 
    <div class="card">
<h2>–ò—Å—Ç–æ—Ä–∏—è –æ–±—Ä–∞—â–µ–Ω–∏–π</h2>
<div id="history"></div>
</div>
 
</section>
 

<section id="notifications" class="section">
<div class="card">
<h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
<div id="notificationList"></div>
</div>
</section>
 

<section id="emergency" class="section">
<div class="card emergency-box">
<h2>üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
<div id="weatherInfo">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...</div>
<div id="dangerLevel" style="margin-top:10px;font-weight:600;"></div>
</div>
</section>
 

<section id="voting" class="section">
<div class="card">
<h2>üèõ –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ –∑–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≥–æ—Ä–æ–¥–∞</h2>
 
        <form id="votingForm">
<label><strong>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:</strong></label><br><br>
<select id="voteCategory" required style="width:100%;padding:12px;border-radius:10px;border:1px solid #ddd;">
<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É</option>
<option>–Ø–º—ã –Ω–∞ –¥–æ—Ä–æ–≥–µ</option>
<option>–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Å–≤–µ—â–µ–Ω–∏–µ</option>
<option>–ú—É—Å–æ—Ä –≤–æ –¥–≤–æ—Ä–µ</option>
<option>–ü—Ä–æ–±–ª–µ–º—ã —Å —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–æ–º</option>
<option>–ù–µ—Ç –æ—Ç–æ–ø–ª–µ–Ω–∏—è</option>
<option>–ü—Ä–æ–±–ª–µ–º—ã —Å –≤–æ–¥–æ–π</option>
<option>–ó–∞—Ç–æ—Ä—ã –∏ –ø—Ä–æ–±–∫–∏</option>
<option>–ü–ª–æ—Ö–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–æ—Ç—É–∞—Ä–æ–≤</option>
<option>–ù–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–≤–µ—Ç–æ—Ñ–æ—Ä—ã</option>
<option>–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∞ –¥–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞</option>
<option>–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–∫–æ–≤–∫–æ–π</option>
<option>–®—É–º –∏ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏–µ</option>
<option>–ù–µ—É–¥–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –ª—é–¥–µ–π —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏</option>
<option>–û–±—Ä—É—à–µ–Ω–∏—è –∑–¥–∞–Ω–∏–π</option>
<option>–ü–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</option>
<option>–ó–∞–±—Ä–æ—à–µ–Ω–Ω—ã–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏</option>
<option>–î—Ä—É–≥–æ–µ</option>
</select>
 
            <br><br>
<button type="submit" class="primary">–ü—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞—Ç—å</button>
</form>
</div>
 
    <div class="card">
<h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è</h2>
<div id="voteStats"></div>
</div>
</section>
 
<footer>
¬© 2026 SmartQala ‚Äî Digital City Platform
</footer>
 
<script>
function showTab(event,id){
    document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
    document.querySelectorAll("nav button").forEach(b=>b.classList.remove("active"));
    document.getElementById(id).classList.add("active");
    event.target.classList.add("active");
}
 

function renderHistory(){
    const history = JSON.parse(localStorage.getItem("history")) || [];
    const container = document.getElementById("history");
    container.innerHTML="";
 
    history.forEach(item=>{
        const div=document.createElement("div");
        div.className="card";
        div.innerHTML=`
<strong>${item.category}</strong><br>
            üìç ${item.address}<br>
            üóì ${item.date}<br>
            üìù ${item.description}<br>
            üß≠ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: [${item.lat.toFixed(5)}, ${item.lng.toFixed(5)}]
        `;
        container.prepend(div);
    });
}
renderHistory();
 

let selectedLat = null;
let selectedLng = null;
 
const categorySelect = document.getElementById("category");
const manualProblemDiv = document.getElementById("manualProblemDiv");
const manualProblemInput = document.getElementById("manualProblem");
const selectedProblemDiv = document.getElementById("selectedProblem");
 
categorySelect.addEventListener("change", function(){
    if(this.value === "–î—Ä—É–≥–æ–µ"){
        manualProblemDiv.style.display = "block";
        selectedProblemDiv.innerText = "–í—ã –≤—ã–±—Ä–∞–ª–∏: –î—Ä—É–≥–æ–µ";
    } else {
        manualProblemDiv.style.display = "none";
        selectedProblemDiv.innerText = "–í—ã –≤—ã–±—Ä–∞–ª–∏: " + this.value;
        manualProblemInput.value = "";
    }
});
 
manualProblemInput.addEventListener("input", function(){
    selectedProblemDiv.innerText = "–í—ã –≤—ã–±—Ä–∞–ª–∏: " + this.value;
});
 
document.getElementById("complaintForm").addEventListener("submit", function(e){
    e.preventDefault();
 
    let category = categorySelect.value;
    if(category === "–î—Ä—É–≥–æ–µ"){
        category = manualProblemInput.value.trim();
        if(!category){
            alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –≤ –ø–æ–ª–µ '–î—Ä—É–≥–æ–µ'");
            return;
        }
    }
 
    if(!selectedLat || !selectedLng){
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–º–µ—Ç—å—Ç–µ —Ç–æ—á–∫—É –Ω–∞ –∫–∞—Ä—Ç–µ!");
        return;
    }
 
    const newComplaint = {
        category: category,
        address: document.getElementById("address").value,
        description: document.getElementById("description").value,
        lat: selectedLat,
        lng: selectedLng,
        date: new Date().toLocaleDateString()
    };
 
    const history = JSON.parse(localStorage.getItem("history")) || [];
    history.push(newComplaint);
    localStorage.setItem("history", JSON.stringify(history));
 
    const notifications = JSON.parse(localStorage.getItem("notifications")) || [];
    notifications.push("–í–∞—à–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É");
    localStorage.setItem("notifications", JSON.stringify(notifications));
 
    alert("–û–±—Ä–∞—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!");
    this.reset();
    manualProblemDiv.style.display="none";
    selectedProblemDiv.innerText="";
    selectedLat=null;
    selectedLng=null;
    if(marker) map.removeLayer(marker);
    renderHistory();
    renderNotifications();
});
 

function renderNotifications(){
    let notifications=JSON.parse(localStorage.getItem("notifications"));
    const container=document.getElementById("notificationList");
    container.innerHTML="";
 
    if(!notifications||notifications.length===0){
        notifications=[
            "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ SmartQala!",
            "–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≥–æ—Ä–æ–¥–∞ –∞–∫—Ç–∏–≤–Ω–∞"
        ];
        localStorage.setItem("notifications",JSON.stringify(notifications));
    }
 
    notifications.forEach(text=>{
        const div=document.createElement("div");
        div.className="notification";
        div.innerText=text;
        container.prepend(div);
    });
}
renderNotifications();
 

const map = L.map('map').setView([50.4111, 80.2275], 13);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'¬© OpenStreetMap'
}).addTo(map);
 
let marker;
map.on('click', function(e){
    selectedLat = e.latlng.lat;
    selectedLng = e.latlng.lng;
 
    if(marker) map.removeLayer(marker);
    marker = L.marker([selectedLat, selectedLng]).addTo(map);
});
 

async function loadWeather(){
    try{
        const res=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=50.4111&longitude=80.2275&current_weather=true`);
        const data=await res.json();
        const w=data.current_weather;
 
        let dangerText="";
        let dangerLevel="üü¢ –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫";
 
        if(w.temperature<=-25){
            dangerText="‚ùÑ –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –Ω–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞!";
            dangerLevel="üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫";
        } else if(w.temperature>=35){
            dangerText="üî• –ê–Ω–æ–º–∞–ª—å–Ω–∞—è –∂–∞—Ä–∞!";
            dangerLevel="üî¥ –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫";
        } else if(w.windspeed>=40){
            dangerText="üí® –°–∏–ª—å–Ω—ã–π –≤–µ—Ç–µ—Ä!";
            dangerLevel="üü† –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫";
        } else{
            dangerText="–ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ.";
        }
 
        document.getElementById("weatherInfo").innerHTML=
            `üå° ${w.temperature}¬∞C | üí® ${w.windspeed} –∫–º/—á<br><br>${dangerText}`;
        document.getElementById("dangerLevel").innerText=dangerLevel;
 
    }catch{
        document.getElementById("weatherInfo").innerText="–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö";
        document.getElementById("dangerLevel").innerText="";
    }
}
 
loadWeather();
setInterval(loadWeather,600000);
 

function renderVoteStats(){
    const votes = JSON.parse(localStorage.getItem("votes")) || [];
    const container = document.getElementById("voteStats");
    container.innerHTML = "";
 
    if(votes.length === 0){
        container.innerHTML = "–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –≥–æ–ª–æ—Å–æ–≤–∞–ª.";
        return;
    }
 
    const tally = {};
    votes.forEach(v=>{
        if(tally[v.category]) tally[v.category]++;
        else tally[v.category]=1;
    });
 
    for(const [cat,count] of Object.entries(tally)){
        const div = document.createElement("div");
        div.style.padding="8px 0";
        div.style.borderBottom="1px solid #eee";
        div.innerText = `${cat}: ${count} –≥–æ–ª–æ—Å(–æ–≤)`;
        container.appendChild(div);
    }
}
 
document.getElementById("votingForm").addEventListener("submit", function(e){
    e.preventDefault();
    const category = document.getElementById("voteCategory").value;
    if(!category){
        alert("–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è");
        return;
    }
 
    const votes = JSON.parse(localStorage.getItem("votes")) || [];
    votes.push({category:category});
    localStorage.setItem("votes",JSON.stringify(votes));
    alert("–í–∞—à –≥–æ–ª–æ—Å —É—á—Ç—ë–Ω!");
    renderVoteStats();
});
 
renderVoteStats();
</script>
 
</body>
</html>
